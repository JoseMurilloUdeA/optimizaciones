<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="utf-8">
    <title>Multiplicadores de Lagrange</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.8.0/math.js"></script>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
    <h2>Multiplicadores de Lagrange</h2>

    <div style="background-color: #f9f9f9; padding: 15px; margin: 10px 0; border-radius: 5px;">
        <h3>Problema:</h3>
        <p><strong>Función objetivo:</strong> f(x,y) = 4x + 3y</p>
        <p><strong>Restricción:</strong> g(x,y) = 2x² + 4y² - x + 4y = 0</p>
        <p><strong>Sistema a resolver:</strong></p>
        <ul>
            <li>∇f = λ∇g → f_x = λg_x, f_y = λg_y</li>
            <li>g(x,y) = 0</li>
        </ul>
    </div>

    <div style="display: flex; gap: 20px;">
        <div style="flex: 1;">
            <h3>Configuración</h3>
            <label>Función objetivo f(x,y):</label>
            <input id="funcObjetivo" value="4*x + 3*y" style="width: 100%; padding: 5px; margin: 5px 0;">

            <label>Restricción g(x,y) = 0:</label>
            <input id="restriccion" value="2*x^2 + 4*y^2 - x + 4*y" style="width: 100%; padding: 5px; margin: 5px 0;">

            <label>Rango de graficación X:</label>
            <input id="rangoX" value="-3,3" style="width: 100%; padding: 5px; margin: 5px 0;" placeholder="-3,3">

            <label>Rango de graficación Y:</label>
            <input id="rangoY" value="-2,1" style="width: 100%; padding: 5px; margin: 5px 0;" placeholder="-2,1">

            <button onclick="resolverLagrange()"
                style="background-color: #007acc; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 0;">
                Resolver Sistema
            </button>

            <button onclick="graficar()"
                style="background-color: #28a745; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; margin: 10px 0;">
                Graficar
            </button>
        </div>

        <div style="flex: 1;">
            <h3>Sistema de Ecuaciones</h3>
            <div id="sistema"
                style="background-color: #e9ecef; padding: 10px; border-radius: 5px; font-family: monospace;">
                <p>Calculando derivadas...</p>
            </div>
        </div>
    </div>

    <!-- Resultados -->
    <div id="resultado"
        style="background-color: #d4edda; padding: 15px; margin: 20px 0; border: 2px solid #c3e6cb; border-radius: 5px; display: none;">
        <h3 style="color: #155724; margin-top: 0;">PUNTOS CRÍTICOS ENCONTRADOS</h3>
        <div id="puntosCriticos"></div>
    </div>

    <!-- Análisis Manual -->
    <div
        style="background-color: #fff3cd; padding: 15px; margin: 20px 0; border: 2px solid #ffeaa7; border-radius: 5px;">
        <h3 style="color: #856404; margin-top: 0;">Análisis del Sistema</h3>
        <div id="analisisManual">
            <p><strong>Para este problema específico, el sistema es:</strong></p>
            <ol>
                <li>f_x = 4 = λ(4x - 1) → 4 = λ(4x - 1)</li>
                <li>f_y = 3 = λ(8y + 4) → 3 = λ(8y + 4)</li>
                <li>g(x,y) = 2x² + 4y² - x + 4y = 0</li>
            </ol>

            <p><strong>De las ecuaciones 1 y 2:</strong></p>
            <p>λ = 4/(4x - 1) = 3/(8y + 4)</p>
            <p>Por tanto: 4(8y + 4) = 3(4x - 1)</p>
            <p>32y + 16 = 12x - 3</p>
            <p><strong>32y = 12x - 19</strong></p>
            <p><strong>y = (12x - 19)/32</strong></p>

            <button onclick="resolverManual()"
                style="background-color: #ffc107; color: #212529; padding: 8px 16px; border: none; border-radius: 3px; cursor: pointer; margin: 10px 0;">
                Resolver Manualmente
            </button>
        </div>
    </div>

    <!-- Gráficas -->
    <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-top: 20px;">
        <div>
            <h3>Curvas de Nivel y Restricción</h3>
            <div id="grafica2D" style="height: 500px;"></div>
        </div>
        <div>
            <h3>Función Objetivo 3D</h3>
            <div id="grafica3D" style="height: 500px;"></div>
        </div>
    </div>

    <script src="lagrange.js"></script>
</body>

</html>